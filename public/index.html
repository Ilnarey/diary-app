<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h1>üìò –õ–∏—á–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫</h1>

  <textarea id="text" placeholder="–ù–∞–ø–∏—à–∏ —Å–≤–æ—é –º—ã—Å–ª—å..."></textarea>
  <br>
  <button onclick="addEntry()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>

  <h2>–ó–∞–ø–∏—Å–∏</h2>
  <ul id="entries"></ul>

  <script>
  async function loadEntries() {
    const res = await fetch('/entries');
    const data = await res.json();
    const list = document.getElementById('entries');
    list.innerHTML = '';

    data.forEach(e => {
      const li = document.createElement('li');
      li.textContent = `${new Date(e.date).toLocaleString()}: ${e.text}`;
      list.appendChild(li);
    });
  }

  async function addEntry() {
    const textarea = document.getElementById('text');
    const text = textarea.value.trim();

    if (!text) {
      alert('–ó–∞–ø–∏—Å—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç–æ–π');
      return;
    }

    await fetch('/entries', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ text })
    });

    textarea.value = '';
    loadEntries();
  }

  loadEntries();
</script>
</body>
</html>

